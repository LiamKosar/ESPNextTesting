generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  email        String   @id @db.VarChar(255)
  first_name   String?  @db.VarChar(50)
  last_name    String?  @db.VarChar(50)
  phone_number String?  @db.VarChar(20)
  device       device[]
}

model device {
  mac_address          String                 @id @db.VarChar(17)
  version              String                 @db.VarChar(10)
  runtime              Float?                @default(0) // Changed to Float for hours
  user_email           String?                @default("kosar.liam@gmail.com") @db.VarChar(255)
  date_updated         String                 @db.VarChar(50)
  User                 User?                  @relation(fields: [user_email], references: [email], onDelete: SetDefault, onUpdate: NoAction, map: "fk_user")
  maintenanceprocedure maintenanceprocedure[]
  vehicle              vehicle?
}

model maintenanceprocedure {
  id               Int     @id @default(autoincrement())
  mac_address      String  @db.VarChar(17)
  name             String  @db.VarChar(100)
  description      String?
  interval         Float   // Changed to Float for hours
  current_interval Float?  @default(0) // Changed to Float for hours
  device           device  @relation(fields: [mac_address], references: [mac_address], onDelete: NoAction, onUpdate: NoAction, map: "fk_device")
}

model vehicle {
  mac_address String  @id @db.VarChar(17)
  name        String  @db.VarChar(100)
  image_url   String?
  device      device  @relation(fields: [mac_address], references: [mac_address], onDelete: NoAction, onUpdate: NoAction, map: "fk_device")
}
